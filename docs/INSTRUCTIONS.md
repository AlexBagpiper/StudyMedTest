# Полное руководство пользователя MedTest Platform

## 1. Введение
MedTest Platform — это специализированная веб-платформа для медицинского тестирования. Она позволяет преподавателям создавать интерактивные задания по диагностике на основе реальных медицинских снимков, а студентам — проходить проверку знаний с автоматической оценкой с помощью технологий ИИ (Computer Vision и LLM).

---

## 2. Роли и доступ

### 2.1. Студент (Student)
*   **Главная страница**: Просмотр доступных тестов и статистики.
*   **Тестирование**: Прохождение тестов, выполнение графической разметки и написание ответов.
*   **Результаты**: Детальный просмотр своих прошлых попыток.

### 2.2. Преподаватель (Teacher)
*   **Банк вопросов**: Создание и редактирование текстовых и графических заданий.
*   **Управление тестами**: Сборка тестов из вопросов банка, управление публикацией.
*   **Аналитика**: Просмотр результатов студентов по своим тестам.

### 2.3. Администратор (Admin)
*   **Управление пользователями**: Создание учетных записей (в т.ч. преподавателей), блокировка.
*   **Настройки системы**: Тонкая настройка весов оценки CV и параметров LLM.
*   **Аудит**: Просмотр системных логов.

---

## 3. Инструкция для Преподавателя

### 3.1. Управление темами
Перед созданием вопросов рекомендуется создать разделы (Темы).
1.  Перейдите в меню **«Темы»** (`/topics`).
2.  Нажмите кнопку **«Создать тему»**.
3.  Введите название темы и нажмите **«Создать»**.

### 3.2. Создание вопросов
Раздел **«Вопросы»** (`/questions`) — основное хранилище заданий.
1.  Нажмите **«Создать вопрос»**. Откроется диалоговое окно.
2.  **Выберите тип**:
    *   **Текстовый ответ**: Студент пишет ответ своими словами. В поле «Эталонный ответ» введите правильный текст для LLM-оценки.
    *   **Графическая аннотация**: Студент размечает снимок.
3.  **Укажите сложность**: Используйте слайдер от 1 до 5. Помните, что сложность влияет на итоговый балл теста.
4.  **Для графических вопросов**:
    *   Нажмите **«Выбрать файлы»** и загрузите изображение (`.jpg`, `.png`).
    *   После загрузки появится кнопка **«Загрузить аннотации»**. Загрузите файл эталонной разметки в формате COCO JSON.
5.  Нажмите **«Создать»**.

### 3.3. Создание теста
Раздел **«Тесты»** (`/tests`).
1.  Нажмите **«Создать тест»**.
2.  Заполните название и описание.
3.  В блоке **«Вопросы теста»** нажмите **«Добавить вопрос»**. Выберите нужные задания из банка.
4.  Вы можете настроить порядок вопросов, перетаскивая их.
5.  Нажмите **«Создать тест»** (он будет сохранен как черновик).
6.  В списке тестов нажмите на иконку **«Опубликовать»** (ракета), чтобы тест стал доступен студентам.

---

## 4. Инструкция для Студента

### 4.1. Начало тестирования
1.  На главной странице или в разделе **«Тесты»** выберите нужный тест.
2.  Нажмите кнопку **«Начать тест»**.
3.  **Внимание**: Вы не сможете прервать тест без потери попытки, если это настроено преподавателем.

### 4.2. Выполнение заданий
*   **Текстовые вопросы**: Введите ответ в текстовое поле. Постарайтесь использовать точную медицинскую терминологию.
*   **Графические задания**:
    *   На экране отобразится медицинский снимок.
    *   Используйте инструменты разметки на панели **справа**.
    *   Для каждой созданной области **обязательно** выберите категорию (Label) в правой панели.
*   Для перехода между вопросами используйте кнопки **«Назад»** и **«Далее»**.

### 4.3. Завершение
На последнем вопросе нажмите кнопку **«Завершить»**. Система отправит ваши ответы на сервер для автоматической оценки. Это может занять до 10-30 секунд.

---

## 5. Анализ результатов

### 5.1. Просмотр оценок
После завершения перейдите в раздел **«Мои результаты»** (`/submissions`).
1.  Нажмите кнопку **«Детали»** у нужной попытки.
2.  На странице **«Детализация оценки»** (`/admin/submissions/:id/review`) вы увидите:
    *   Итоговый балл (0-100) и оценку (2-5).
    *   **Для текста**: Комментарии ИИ о том, что было упущено в ответе.
    *   **Для графики**: Метрики точности (IoU), полноты и достоверности вашей разметки.

### 5.2. Апелляция и пересчет (для преподавателей)
Если вы считаете, что оценка выставлена неверно:
1.  Преподаватель может открыть вашу работу в разделе **«Все результаты»**.
2.  Нажать кнопку **«Пересчитать оценку»**, если были изменены глобальные веса сложности или исправлен эталон в банке вопросов.

---

## 6. Техническая поддержка
При возникновении проблем с отображением снимков или сохранением ответов:
1.  Обновите страницу (ответы сохраняются автоматически после каждого действия).
2.  Если ошибка сохраняется, нажмите на свой профиль в верхнем правом углу и убедитесь, что вы авторизованы.
3.  Свяжитесь с администратором, указав ID сессии из раздела результатов.
